window.walkMeGermany = true;_walkmeWebpackJP([1],Array(125).concat([function(t,e,r){var n=_walkmeInternals.ctx,a=n.get("PlatformDI"),i=n.get("Consts");n.register("TutorialsManager").asCtor(r(126).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),n.register("WalkthrusModule").asCtor(r(127)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),n.register("StepRetriever").asCtor(r(128)).dependencies("WalkthrusContainer"),n.register("WalkthruOnBeforeUnloadHandler").asCtor(r(129)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),n.register("WalkthrusContainer").asCtor(r(130)),n.register("CurrentWalkthruData").asCtor(r(131)).dependencies("WalkthrusContainer, Consts"),n.register("CurrentStepUI").asCtor(r(132)).dependencies("CurrentWalkthruData, StepUtils"),n.register("WalkthruStatePersister").asCtor(r(133)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),n.register("WalkthruStateRestorer").asCtor(r(134)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),n.register("WalkthruStepsLoader").asCtor(r(135)).dependencies("SettingsFile, WmAjax, DataFixer, CommonUtils, StepUtils, Logger, LanguageManager,SiteConfigManager, WalkthrusContainer"),n.register("WalkthruBranchPlayer").asCtor(r(136)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),n.register("WalkthruApi").asCtor(r(137)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),n.register("WalkthruLegacyExternalApi").asCtor(r(138)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),n.register("WalkthruBranchData").asCtor(r(139)),n.register("WalkthruBalloonButtonsEventsBinder").asCtor(r(140)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),n.register("WalkthruBalloonNotifier").asCtor(r(141)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),n.register("WalkthruPopupNotificationsService").asCtor(r(142)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),n.register("StepUtils").asCtor(r(143)).dependencies("Consts"),n.register("WalkthruSurveyActivator").asCtor(r(144)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),n.register("WalkthruSafeStartHandler").asCtor(r(145)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),n.register("WalkthrusSiteConfigDataMigrator").asCtor(r(146)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),n.register("DataFileWalkthruDataAppender").asCtor(r(147)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),n.register("EndUserWalkthruDataConverter").asCtor(r(148)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),n.register("WalkthrusDestroyer").asCtor(r(149)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),n.register("WalkthruJawsAccessibilityUtil").asCtor(r(150)).dependencies("StepUtils, JawsAccessibilityUtil"),n.register("WalkthruEventDataAppender").asCtor(r(151)).dependencies("CurrentWalkthruData"),n.register("WalkthruEventsInitializer").asCtor(r(152)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),n.register("WalkthruStartFailureHandler").asCtor(r(153)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),n.register("WalkthruActionsFactory").asCtor(r(154)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),n.register("WalkthruRedirectService").asCtor(r(155)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),n.register("TriggersManager").asCtor(r(156)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),n.register("BackButtonUtils").asCtor(r(157)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),n.register("PlayManager").asCtor(r(158)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),n.register("BBCodeWalkthruActivator").asCtor(r(159)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),n.register("BBCodeWalkthruSurveyActivator").asCtor(r(160)).dependencies("CurrentWalkthruData, BBCodeSurveyActivator, Consts"),n.register("WalkthruPopupStepElementFinderExtension").asCtor(r(161)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthruActionStepElementFinderExtension").asCtor(r(162)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthrusModuleInitializer").asCtor(r(163)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, AutoStartTypes, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, AutoStartHelper, WalkthruAutoStartHelper"),n.register("WalkthruOwnershipManager").asCtor(r(164)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),n.register("PassOwnershipNextStepProvider").asCtor(r(165)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),n.register("WalkthruPassOwnershipDeterminator").asCtor(r(166)).dependencies("Consts"),a.register([i.PLATFORM.Web,i.PLATFORM.MobileWeb,i.PLATFORM.Desktop],function(){n.register("WalkthruAutoStartHelper").asCtor(r(167)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),n.register("WalkthruPersistenceDataRetriever").asCtor(r(168)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),n.register("WalkthruRunningState").asCtor(r(169)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),n.register("AnchorTagsFixer").asCtor(r(170)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),n.register("WalkthruConditionEvaluator").asCtor(r(171)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),n.register("WalkthruConditionFunctions").asCtor(r(172)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),n.register("AuditWtsManager").asCtor(r(173)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper, AuditingEnabledIndicator"),n.register("AuditStepsManager").asCtor(r(174)).dependencies("ServerDataSenderManager,WalkMeInfo,Logger,HostData,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator, AuditingEnabledIndicator, WmInternals, JsonUtils"),n.register("WalkthruActionClickedEventBinder").asCtor(r(175)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),t.exports={init:function(){var t=n.get("IsInEditor"),e=n.get("AuditSourceProvider");n.get("WalkthrusModuleInitializer")[t.get()&&!e.isInPreviewMode()?"postDataFileLoaded":"init"]()}}},function(t,r,n){(function(e){var t=function(n){function t(t,e,r){n.call(this,{deployables:[],lib:t,type:e.DEPLOYABLE_TYPE.Tutorial}),this.permalinkManager=r,this._name="Walkthru"}return e(t,n),t.prototype.activateById=function(t,e){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})},t.prototype.autoStartEnabled=function(t){return!this.permalinkManager.isTrainingInStartingMode()},t}(n(62).DeployablesManager);r.TutorialsManager=t}).call(r,n(1))},function(t,e,r){(function(ht){t.exports=function(O,r,U,M,D,b,B,n,H,F,o,G,K,V,Y,j,d,f,h,t,Q,X,z,J,q,Z,$,s,tt,I){var et=this;et.setTutorials=function(t){a={};for(var e=0;e<t.length;e++)t[e].Steps&&r.fixSteps(t[e],U.get());M.setWalkthrus(t)},et.isTutorialPackageHidden=function(t){var e=rt.tutorialRunSettingsMap[t.TutorialId];return!!e&&e.isPackageHidden},et.canShowTutorial=function(t){if(0==t.IsVisible)return!1;for(var e=p(t,l.URL),r=!1,n=0;n<e.length;n++)if(c(0,e[n])){r=!0;break}if(0<e.length&&!r)return!1;if(1==D.getSettingsValue(t.Settings,"DOCTEnabled",0)){var a=D.getSettingsValue(t.Settings,"DOCT","");if(""!=a)try{var i=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name}),o=i.getCurrentEvaluationValueAndStopEvaluating(a);if(H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.WtConditionEvaluated,t),!o)return H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(u){}}if(0<p(t,l.FIRST_STEP_MUST_EXIST).length){if(0==t.Steps.length)return!1;var s=t.Steps[0];return b.customerLog('First Step Condition for "'+(s.StepTitle||s.StepText)+', Walk-Thru "'+t.Name+'"'),O.findElement(s)}return H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.CanShowWt,t),!0},et.stopTutorial=function(t,e,r){H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.WalkthruStopped,Y.getCurrentStep()),u(),r||Z.releaseBalloons(),Y.state=B.WALKTHRU_STATE.NOT_RUNNING,h.removeOverlay();var n=Y.currentStep;if(Y.currentStep=-1,t||j.storeStateInCookie(),_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset(),!e){var a=Y.getCurrentWalkthru();g(a,n,B.SURVEY_START_EVENTS.WalkThruExited)}},et.startNewTutorial=function(p,c,S,g){var T=M.getWalkthruByIndex(p);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(T&&T.TutorialId,function(){return function(){try{b.customerLog("startNewTutorial : Index = "+p+". From Step = "+c+" testMode: "+S),h.fixFlash(),E(p);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=g,c=F.defaultValue(c,0),S=F.defaultValue(S,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!S){if(Y.state!=B.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(p,c))return!0;v(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||y(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.WalkthruStarted,T);var e=[],r=c,n=0==(c=_walkmeInternals.ctx.get("PlayManager").findFirstStep(p,c,e));if(0<c&&!S){var a=f.get();a==B.SOURCES.play||a==B.SOURCES.preview?k(p,r,c,B.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,N(p,0,c,B.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==c&&0<(c=_(p))&&!S&&(t=!0,N(p,0,c,B.STEP_STATUS.SkippedByTutorialCondition));if(!A(p,!1)&&c<0){if(S)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(T.TutorialId);var i={tutorialIndex:p,wt:T,checkStepExistsTrace:e};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(I,T,i)){for(var o=0;o<e.length;o++){var s=e[o].stepStatus==B.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(T,T.Steps[e[o].stepIndex],e[o].stepStatus,s),k(p,e[o].stepIndex,e[o].stepIndex+1,e[o].stepStatus)}var u=e[e.length-1].stepIndex,l=T;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(l,u),v()}}else{if(S)return!0;W(p,c,n,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:undefined,g,r)}}catch(d){return b.error(d),!1}return H.deprecatedRaiseEvent("WtHasGuid",T,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),H.raiseEvent(B.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0}()})},et.tutorialFinished=x,et.executeTutorialNextStep=ut,et.postWelcomeStep=gt,et.executeCurrentStep=ft,et.executePreviousStep=function(){Y.state=B.WALKTHRU_STATE.RUNNING,Z.releaseBalloons(function(){et.stepWasCompleted(!1),Y.currentStep=Y.lastBackButtonStepIndex-1,et.executeTutorialNextStep()})},et.getAction=ot,et.getSiteConfigByTutorialId=function(t){return rt.tutorialRunSettingsMap[t]?rt.tutorialRunSettingsMap[t].siteConfig:U.get()},et.isTutorialIdsExist=function(t){var e=n.map(t,M.getWalkthruIndexByWalkthruId),r=n.inArray(-1,e);return r==undefined||-1==r},et.isStepTrigger=st,et.terminateTutorial=function(){Y.stepPlayStack=[],Z.releaseBalloons(),u(),H.raiseEvent("WalkthruAborted")},et.checkTutorialSkipFirstStepCondition=_,et.fillMissingStepAudits=N,et.getNextStepIncludingSplit=w,et.releaseEvents=lt,et.stepWasCompleted=pt,et.getPlayConditionMode=St,et.checkPlayStepCondition=function(t){var e=D.getSettingsValue(t.Settings,"skipStepCond","");if(0<e.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(e)}catch(a){return!0}if(1!=D.getSettingsValue(t.Settings,"PSCTEnabled",0))return!J.isActionStep(t)||"never"!=D.getSettingsValue(t.Settings,"whenToFire","");var r=D.getSettingsValue(t.Settings,"PSCT","");if(""==r)return!0;try{var n=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(r);return H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),n}catch(a){return!1}},et.executeTutorialStep=L,et.checkIfStepExistsWithSkippables=Tt,et.isStepPlayable=function(t,e){return Tt(t,e,undefined,undefined,undefined,B.CHECK_STEP_MODE.Normal)==e},et.checkTutorialRedirectCondition=A,et.loadTutorial=W,et.releaseBalloonsTimeouts=u,et.resetState=v,et.cleanCurrentStepResources=function(){if(i){for(var t=i.length-1;0<=t;t--)i[t].cleanResources();i=[]}},et.addCurrentStepResource=function(t){i.push(t)},et.setMember=nt,et.removeCrossUsersState=y,et.getMatchedSurvey=P,et.getWalkthruSurveyFrequency=T;var rt={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},l={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},e="PSCTMode";function nt(t,e){rt[t]=e}var m="stepCheck",a={},C=[],at=!1,it=0,i=[];function ot(t){if(a[t.Id]!=undefined)return a[t.Id];var e=D.getSettingsValue(t.Settings,"action",null);return e?(a[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(e.actionType,e.arguments,B.STEP_PLAY_INITIATOR_ENUM.STEP,t),a[t.Id]):(b.customerLog("No action core. aborting..."),null)}function E(t){var e=M.getWalkthruByIndex(t);if(rt.tutorialRunSettingsMap[e.TutorialId]){var r=rt.tutorialRunSettingsMap[e.TutorialId].siteConfig;r&&U.set(r)}}function st(t,e){if("number"==typeof t)return t==e;for(var r=t.split(","),n=0;n<r.length;n++)if(e+""==r[n])return!0;return!1}function k(t,e,r,n){for(var a=e;a<r;a++)if(n!=B.STEP_STATUS.SkippedByActionStep){var i=M.getWalkthruByIndex(t);H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.NewSkippedStep,i.Steps[a])}}function p(t,e){var r=Array();if(!t.Conditions)return r;for(var n=0;n<t.Conditions.length;n++)t.Conditions[n].Type==e&&(t.Conditions[n].IsEnabled!=undefined&&1!=t.Conditions[n].IsEnabled||r.push(t.Conditions[n]));return r}function c(t,e){switch(e.Type){case l.URL:return!!s.isLocationMatchString(e.Content);default:b.error(new Error("Invalid condition type: "+e.Type))}}function _(t){for(var e=p(M.getWalkthruByIndex(t),l.SKIP_FIRST_STEP),r=0;r<e.length;r++){var n=e[r];if(s.isLocationMatchString(n.Content)){var a=n.ExtraData,i=a?a-1:1;return b.customerLog("The walk-thru has a skip step condition ("+n.Content+") which is true. Skipping to: "+i),i}}return 0}function A(t,e){var r,n,a,i=p(M.getWalkthruByIndex(t),l.REDIRECT);return 0!=i.length&&(r=i[0],n=e,a=r.Content,n?o.redirect(a):o.canRedirect(a))}function W(t,e,r,n,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),Y.stepAppearanceIndex=0;var o=M.getWalkthruByIndex(t);H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.WalkthruLoaded,o),E(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),n=F.defaultValue(n,d.generateNewPlayGuid(o.TutorialId)),r=F.defaultValue(r,!0),e=F.defaultValue(e,0);var s=i==undefined?e:i;0===e&&(e=_(t)),S(t,e,n,a,[],[],[]);try{a=a||{type:B.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,s,e,n)}catch(u){b.error(u)}f.get()!=B.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,n),gt(t)}catch(l){b.error(l)}}function S(t,e,r,n,a,i,o){u(),Z.releaseBalloons(),Y.state=B.WALKTHRU_STATE.RUNNING,Y.currentWalkthru=t,Y.currentStep=e-1,Y.stepPlayHistory=a,Y.stepPlayStack=i,Y.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=r,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=n,j.storeStateInCookie()}function u(){G.stopTimeoutsArray("playTimeouts"),rt.executeTutorialNextStepNotFinished=!1}function g(t,e,r){if(t&&t.Settings.survey){var n=t.Settings.survey.surveyId,a=T(t.Settings.survey,r);if(a){var i={objectId:t.Id,type:B.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,r,i,n,a,undefined,e)}}}function v(t,e){Y.currentWalkthru=-1,Y.state=B.WALKTHRU_STATE.NOT_RUNNING,Y.currentStep=-1,Y.splitPointStack=[],Y.stepPlayHistory=[],Y.stepPlayStack=[],Y.stepCompletedHistory=[],Y.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",rt.executeTutorialNextStepNotFinished=!1,a={},rt.dontContinueTutorial=!1,at=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),e||j.storeStateInCookie()}function y(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),e=0;e<t.length;e++){var r=t[e];_walkmeInternals.ctx.get("ClientStorageManager").removeData(B.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,r)}}function T(t,e){var r=P(t,e);return r&&(r.repeat||"visit")}function P(t,e){if(t.startCondition==e||t.startCondition==B.SURVEY_START_EVENTS.Both)return t}function N(t,e,r,n){for(var a=e;a<r;a++){var i=M.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],n)}}function x(t){Z.releaseBalloons(),Y.state=B.WALKTHRU_STATE.NOT_RUNNING,j.storeStateInCookie();var e=0<Y.splitPointStack.length?Y.splitPointStack.pop():null,r={hadSplit:!!e,finishAfterRefresh:!!t},n=Y.getCurrentWalkthru();if(H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.WalkthruCompleted,n,r),h.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(n.TutorialId,B.DEPLOYABLE_TYPE.Tutorial),g(n,Y.currentStep,B.SURVEY_START_EVENTS.WalkThruCompleted),e){var a=M.getWalkthruByIndex(e.tutorialIndex);H.deprecatedRaiseEvent("switchToWalkthru",a.Id),H.deprecatedRaiseEvent("BackFromBranch",a),S(e.tutorialIndex,e.stepIndex,e.playGuid,e.playInitiator,e.stepPlayHistory,e.stepPlayStack,e.stepCompletedHistory),O.executeTutorialNextStep()}else Y.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership()}function ut(){b.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(R)}function R(){if(rt.executeTutorialNextStepNotFinished)b.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(at)return at=!1,b.customerLog("executeTutorialNextStep: waiting for other window",5),b.customerLog("Waiting for other window..."),void function n(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData(),G.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),e=t.keysConfig.walkthru.waitForOtherWindow,r=t.getData(e.key,undefined,Y.getCurrentWalkthru().userGuid);1==r?(b.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(e.key,0,e.expiry,Y.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):n()},500)}();if(rt.dontContinueTutorial)b.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);else if(Y.getCurrentWalkthru().Steps.length-1!=Y.currentStep){rt.executeTutorialNextStepNotFinished=!0;var t,e=null==(t=w())?0:t.Delay;b.customerLog(F.formatString("Next step including split is: {0} seconds",e),5,B.LOG_FEATURES.BALLOON),G.playSetTimeout(function(){function t(){rt.executeTutorialNextStepNotFinished=!1,ft()}Y.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(Y.getCurrentWalkthru().Id,function(){0<Y.currentStep&&!st(Y.getPreviousStep().End,B.WALKTHRU_STEP_TRIGGER.NOTHING)?Z.releaseBalloons(t):t()})},1e3*e)}else x()}}function w(){return function t(e,r,n){var a=M.getWalkthruByIndex(e);if(a.Steps.length>r+1){var i=a.Steps[r+1];return i.TutorialIndex=e,i}var o=Y.splitPointStack;if(o.length>n){var s=o[o.length-1-n];return t(s.tutorialIndex,s.stepIndex-1,n+1)}return null}(Y.currentWalkthru,Y.currentStep,0)}function L(a){function t(t){b.customerLog(t,5,B.LOG_FEATURES.BALLOON)}var e=F.getTimer(t),i={};it!=a.Id&&Y.stepAppearanceIndex++,a.playNumber=Y.stepAppearanceIndex,it=a.Id,H.raiseEvent(B.EVENTS.Walkthrus.StepExecuting,{playNum:Y.stepAppearanceIndex});var r=M.getWalkthruByIndex(Y.currentWalkthru),n=F.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",a.StepIndex+1,a.StepTitle,r.Name);if(b.customerLog(n),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepStarted,a),X.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),Y.state!=B.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&Y.state!=B.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&Y.state!=B.WALKTHRU_STATE.WAITING_FOR_CONDITION){var o=J.isActionStep(a)?B.STEP_STATUS.Shown:B.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,o)}var s=St(a),u=et.checkPlayStepCondition(a);if(!u&&(s==B.playConditionModes.PLAY_CONDITION||s==B.playConditionModes.BOTH&&Y.state!=B.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return b.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,B.STEP_STATUS.SkippedByCondition),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepSkipped,a),void ut();if(ct(a)){var l=Tt(Y.currentWalkthru,a.StepIndex,0,1,undefined,B.CHECK_STEP_MODE.Normal);if(-1==l)return b.customerLog("Keep looking for element after popup."),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),Y.state=B.WALKTHRU_STATE.WAITING_FOR_ELEMENT,G.playSetTimeout(function(){ft()},500),void j.storeStateInCookie();if(-2==l||-5==l){var d="Play condition isn't met, skipping the popup.";return-5==l&&(d="Loop detecetd"),b.customerLog(d),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,B.STEP_STATUS.SkippedNotFound),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepSkipped,a),void ut()}}var p,c,S,g,T,f,h,I,E=undefined;if(u||Y.state!=B.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var k={},_=F.getTimer(t);b.customerLog("Step - Play Condition"),E=O.findElement(a,null,k),i.FETime=_("Done looking for sticky step named "+(a.StepTitle||a.StepText)+" with id "+it),a.Score=k.score}else b.customerLog("Sticky PlayCondition isn't met."),E=!1;if(E){if(E&&!0!==E){b.customerLog("Element found:"),b.customerLog(E);var A,m=q.getComplexHtmlElements(a,E);m&&(E=m.elements,A=m.parentElement)}H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepElementFound,a),H.raiseEvent("BeforeNewStepShown");var C=0<Y.stepPlayStack.length?Y.stepPlayStack[Y.stepPlayStack.length-1]:null,W=C?Q.getStepById(C).StepIndex:null;if(g=a.Id,Y.stepPlayHistory.push(g),(0<Y.stepPlayStack.length?Y.stepPlayStack[Y.stepPlayStack.length-1]:null)!=g&&Y.stepPlayStack.push(g),D.getSettingsValue(a.Settings,"fake",!1))return b.customerLog("This is a fake step. Continue to next step."),j.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,B.STEP_STATUS.FakeFound),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.FakeStep,a),void ut();if(Y.state=B.WALKTHRU_STATE.RUNNING,J.isActionStep(a))return void G.playSetTimeout(function(){ot(a).doAction(),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepPerforming,a)},100);var v=_walkmeInternals.ctx.get("TriggersManager").handle(E,a,Y.currentStep,Y.currentWalkthru,W),y=v.executeNextStep,P=v.clearElementEventsFuncs,N=v.buttons;D.getSettingsValue(a.Settings,"waitOtherWindow",!1)&&(at=!0),i.logicTime=e("Finished pre-balloon logic");var x=a.StepTitle,R=a.StepText;(S=a).DesignTemplateId||S.DesignTemplatePlaceholderConfigs&&0!=S.DesignTemplatePlaceholderConfigs.length||(a.DesignTemplatePlaceholderConfigs=tt.createPlaceHolderConfigs(ht.get("SharedConsts").templateEntityType.balloon,a.StepTitle,a.StepText));var w=_walkmeInternals.ctx.create("Balloon",{element:E,parentElement:A,forceEmbedBalloonInIframe:!1,positionHelper:K,dontShowIoBalloon:!X.isFeatureEnabled("multSpot")&&function(t){var e=t,r=Y.stepPlayHistory;if(1<r.length){var n=M.getWalkthruByIndex(Y.currentWalkthru);e=Q.getStepById(r[r.length-2],n)}return st(t.End,B.WALKTHRU_STEP_TRIGGER.NOTHING)||st(e.End,B.WALKTHRU_STEP_TRIGGER.NOTHING)}(a),isFirstStep:function(){var t=Y.stepPlayHistory;if(t.length<2)return!0;for(var e=0;e<t.length-1;e++){var r=M.getWalkthruByIndex(Y.currentWalkthru),n=Q.getStepById(t[e],r);if(!F.isDefined(n.Settings.action))return!1}return!0}(),stepSettings:a.Settings,text:{title:x,content:R,subText:(T=U.get().StepsInfoText,f=dt(),h=f.totalVisibleSteps,I=f.passedVisibleSteps,T=X.isFeatureEnabled("floatingsubtext")?(T=T.replace("{0}",B.SUBTEXT_CURRENT_START+I+B.SUBTEXT_CURRENT_END)).replace("{1}",B.SUBTEXT_TOTAL_START+h+B.SUBTEXT_TOTAL_END):(T=T.replace("{0}",I)).replace("{1}",h))},end:a.End,position:a.Position,buttons:{next:N.nextButton,done:N.doneButton,back:0<=N.backButtonStepIndex},data:{balloonEntityId:a.Id,containerEntityId:a.TutorialId,type:a.Type},configuration:a.Configuration,logger:b,drawer:$.getBalloonDrawer(a.Configuration,a),siteConfig:U.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:a.DesignTemplatePlaceholderConfigs,placeholderVariableValues:dt(),initiatorData:{initiator:a,type:B.STEP_PLAY_INITIATOR_ENUM.STEP}});if(w.onDestroy(function(){lt(E,elementEvents)}),w.setReleaseEvents(P),V.add(w),j.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,B.STEP_STATUS.Shown),X.isFeatureEnabled("jawsAccessibility")){var L=x||R;x&&R&&(L+=". "+R),L&&E.attr("alt",L)}w.Show(!0,function(t,e){var r;wmjQuery.extend(!0,i,t),r={balloonDiv:e,step:a},H.raiseEvent(B.EVENTS.Walkthrus.ShowStepBalloon,r);var n={Element:E,Balloon:e};H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepShown,a,n),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepPerforming,a,n),w.SetTimeoutOn(function(){(function(){switch(Y.state){case B.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case B.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case B.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}})()&&(F.getSettingsValue(Y.getCurrentStep().Settings,"sticky",0)?(b.customerLog("Sticky - keep looking for element.",5),Z.releaseBalloons(),Y.state=B.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,ft()):Y.getCurrentStep().IsSkippable?(nt("dontContinueTutorial",!1),b.customerLog("Skippable - continue to next step."),ut()):Y.state!=B.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(b.customerLog("Stopping walk-thru."),Z.releaseBalloons(),Y.state=B.WALKTHRU_STATE.PAUSED,H.raiseEvent("WalkthruAborted"),H.raiseEvent("WalkthruStopped")))}),y&&(pt(),ut())}),D.getSettingsValue(a.Settings,"isSelfExecuting",!1)&&(p=a,c=E,G.libSetTimeout(function(){switch((e=p.End.split(/,/))[0]==B.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<e.length?F.getInt(e[1]):F.getInt(e[0])){case B.WALKTHRU_STEP_TRIGGER.CLICK:b.customerLog("Self Executed Step - Trigger: Click",3),z.click(c);break;case B.WALKTHRU_STEP_TRIGGER.HOVER:b.customerLog("Self Executed Step - Trigger: Hover",3),z.hover(c);break;case B.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:b.customerLog("Self Executed Step - Trigger: Text Input",3),z.text(c,p.Settings.selfExecuteText,undefined,undefined,p);break;case B.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var t=p.Settings.complexHtml&&p.Settings.complexHtml.val;t?(z.select(c,t),b.customerLog("Self Executed Step - Trigger: Select Value",3)):b.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:b.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),rt.dontContinueTutorial=!1,ut()}var e},1e3*p.Settings.reactionTime||B.DEFAULT_REACTION_TIME))}else b.customerLog("Element not found."),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepElementNotFound,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),Y.state==B.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(b.customerLog("Step was sticky. Keep looking for the element."),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.WaitingForStickyStep,a),Y.state=B.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,G.playSetTimeout(function(){ft()},500),j.storeStateInCookie()):a.IsSkippable||D.getSettingsValue(a.Settings,"skipNotExists",!1)?(J.isActionStep(a)?(b.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,B.STEP_STATUS.NonValidActionStep)):(b.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),a,B.STEP_STATUS.SkippedNotFound)),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepSkipped,a),ut()):(b.customerLog("Keep looking for the element."),H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),Y.state=B.WALKTHRU_STATE.WAITING_FOR_ELEMENT,G.playSetTimeout(function(){ft()},500),j.storeStateInCookie())}function lt(t,e){for(var r=0;r<e.length;r++)t.unbind(e[r]+".mt");return!1}function dt(){for(var t,e=M.getWalkthruByIndex(Y.currentWalkthru).Steps,r=0,n=0,a=0;a<e.length;a++)(t=e[a]).Type==B.STEP_TYPE.Action||parseInt(D.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(D.getSettingsValue(t.Settings,"fake",0))||(r++,a<=Y.currentStep&&n++);return{totalVisibleSteps:r,passedVisibleSteps:n}}function pt(t){t=F.defaultValue(t,!0);var e,r=Y.getCurrentStep();H.deprecatedRaiseEvent(B.EVENTS.Walkthrus.StepCompleted,r),e=r,Y.stepCompletedHistory.push(e.Id),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),r,B.STEP_STATUS.Performed),function(t){if(D.getSettingsValue(t.Settings,"resumeOtherWindow",!1)){var e=_walkmeInternals.ctx.get("ClientStorageManager"),r=e.keysConfig.walkthru.waitForOtherWindow;e.saveData(r.key,1,r.expiry,Y.getCurrentWalkthru().userGuid)}}(r)):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(Y.getCurrentWalkthru(),r,B.STEP_STATUS.MovedBack)}function ct(t){return t.Type==B.STEP_TYPE.Popup&&1==D.getSettingsValue(t.Settings,"popup-play-condition",0)}function St(t){return D.getSettingsValue(t.Settings,e,B.playConditionModes.PLAY_CONDITION)}function gt(t){-1==Y.currentStep&&A(t,!0)||ut()}function Tt(f,h,I,E,k,_,A){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,e){return function(t){if(C&&0!=C.length){for(var e=[],r=undefined;0<C.length;){if((r=C.pop()).id==t){!0;break}e.push(r)}if(0<e.length)for(;0<e.length;)C.push(e.pop())}}(e),b.customerLog("returned checking "+h+" ("+r.Id+") result: "+t,5,m),t}var e=M.getWalkthruByIndex(f),r=e.Steps[h];E=F.defaultValue(E,1),I=F.defaultValue(I,0);var n,a,i=function(t){for(var e=0;e<C.length;e++)if(C[e].id==t)return!0;return!1}(r.Id);if(b.customerLog("Checking if step index "+h+" ("+r.Id+") can be played. looped: "+i+" on mode:"+_,5,m),n=r,a=_,C.push({id:n.Id,mode:a}),i)return t(-5,r.Id);var o=!0;St(r)!=B.playConditionModes.STICKY_CONDITION&&(o=et.checkPlayStepCondition(r));var s,u,l,d=D.getSettingsValue(r.Settings,"fake",!1),p=D.getSettingsValue(r.Settings,"skipNotExists",!1)||r.IsSkippable||!o||d;if(s=h,l=o,u=p?l?B.STEP_STATUS.SkippedNotFound:B.STEP_STATUS.SkippedByCondition:B.STEP_STATUS.SupposedToShow,k&&k.push({stepIndex:s,stepStatus:u}),o&&!d&&b.customerLog("Step - Find Element "+(A||"")),o&&!d&&O.findElement(r))return J.isActionStep(r)?t(function(t){var e=ot(t);if(e.getGoToData){var r=e.getGoToData(),n=Tt(r.tutorialIndex,r.stepIndex,I,E,k,B.CHECK_STEP_MODE.Normal);if(n<0)return n}else if("stopWt"==e.type)return-2;return t.StepIndex}(r),r.Id):J.isPopupStep(r)?t(function(t){if(!ct(t)||1!=E)return t.StepIndex;if(M.getWalkthruByIndex(f).Steps.length>t.StepIndex){var e=Tt(f,t.StepIndex+1,I,E,k,B.CHECK_STEP_MODE.Normal);return e<0?e:t.StepIndex}}(r),r.Id):t(h,r.Id);var c=h+E;if(p){var S;if(c<0)return t(-2,r.Id);if(c==e.Steps.length){var g=Y.splitPointStack;if(g.length>I){var T=g[g.length-1-I];return S=Tt(T.tutorialIndex,T.stepIndex,I+1,E,k,B.CHECK_STEP_MODE.Normal),b.customerLog("Checking if step "+h+" ("+r.Id+") can be played. reached last step",5,m),t(S,r.Id)}return t(-2,r.Id)}return b.customerLog("Checking if step "+h+" ("+r.Id+") can be played. Skipping to: "+c,5,m),t(S=Tt(f,c,I,E,k,B.CHECK_STEP_MODE.Normal),r.Id)}return t(-1,r.Id)})}function ft(){var t=Y.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){L(t)})}_walkmeInternals.ctx.get("WmInternals").on(B.EVENTS.Flows.BeforeFlowStarted,function(){y()})}}).call(e,r(2))},function(t,e){t.exports=function(i){function n(t,e){var r=i.getWalkthruIndexByWalkthruId(t);if(-1<r){var n=a(e,i.getWalkthruByIndex(r));if(n)return n}return null}function a(t,e){if(e)return o(t,e);for(var r=i.getWalkthrus(),n=0;n<r.length;n++){var a=o(t,r[n]);if(a)return a}return null}function o(t,e){for(var r=e.Steps,n=0;n<r.length;n++)if(r[n].Id==t)return r[n];return null}this.getStepByWalkthruAndStepIds=n,this.getStepById=a,this.getStepIndex=function(t,e){var r=n(e,t);return r?r.StepIndex:-1}}},function(t,e){t.exports=function(e,r,n,a,i,o,t){this.register=function(){t.register(u)};var s=(this.setIgnoreNextBeforeUnload=function(t){s=t},!1);function u(t){o.isEmpty()&&(e.customerLog("onbeforeunload called",1),s?s=!1:(r.setMember("dontContinueTutorial",!0),n.pauseAllTimeouts(),a.get().enabled()?a.get().loseOwnership(!1,!0):i.isFeatureEnabled("noUnload")&&n.setWalkmeTimeout(function(){r.setMember("dontContinueTutorial",!1),n.resumeAllTimeouts()},3e3)))}}},function(t,e){t.exports=function(){var t=this;t.getWalkthrus=function(){return n},t.setWalkthrus=function(t){n=t},t.getWalkthruByIndex=a,t.getWalkthruById=function(t){for(var e=0;e<n.length;e++)if(n[e].TutorialId==t)return n[e];return null},t.getWalkthruIndexByWalkthruId=function(t){for(var e=-1,r=0;r<n.length;r++)if(n[r].TutorialId==t){e=r;break}return e},t.getStepByIndex=function(t,e){var r=a(t);if(r&&r.Steps[e])return r.Steps[e]};var n=[];function a(t){return n[t]}}},function(t,e){t.exports=function(t,e){var r=this;function n(){return t.getWalkthruByIndex(r.currentWalkthru)}function a(t){var e=n();return e&&e.Steps&&e.Steps[t]}r.currentWalkthru=-1,r.currentStep=-1,r.stepAppearanceIndex=0,r.splitPointStack=[],r.stepPlayHistory=[],r.stepPlayStack=[],r.stepCompletedHistory=[],r.lastBackButtonStepIndex=-1,r.getCurrentWalkthru=n,r.getCurrentStep=function(){return a(r.currentStep)},r.getPreviousStep=function(){return a(r.currentStep-1)},r.getNextStep=function(){return a(r.currentStep+1)},r.getStep=a,r.state=e.WALKTHRU_STATE.NOT_RUNNING}},function(t,e){t.exports=function(a,i){this.shouldKeepOverlay=function(){var t,e,r,n=a.getCurrentStep();return i.isSpotlightStep(n)&&(t=n,i.isPopupStep(t)&&(e=a.getPreviousStep(),r=a.getNextStep(),i.isPopupStep(e)||i.isPopupStep(r)))}}},function(t,e){t.exports=function(I,E,a,i,k,_,A){this.storeStateInCookie=function(){var t=undefined,e=undefined,r=undefined,n=undefined,a=k.getCurrentWalkthru(),i=a?a.TutorialId:-1,o=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),s=E.getCurrentInteractionGuid();k.state==I.WALKTHRU_STATE.RUNNING||k.state==I.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(t=k.currentStep+1,a.Steps.length<=k.currentStep+1&&(e=1)):k.state==I.WALKTHRU_STATE.WAITING_FOR_SPLIT?(t=k.currentStep,r=_.splitTutorialIds,n=_.splitStartFromStepId):t=k.currentStep;var u,l,d,p,c,S,g,T=(u=i,l=t,d=e,p=r,c=n,S=s,(g={})[m.CURRENT_TUTORIAL_COOKIE_NAME]=u,g[m.CURRENT_STATE_COOKIE_NAME]=k.state,g[m.CURRENT_STEP_COOKIE_NAME]=l,g[m.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=k.stepAppearanceIndex,g[m.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,g[m.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,g[m.SPLIT_POINT_COOKIE_NAME]=k.splitPointStack,g[m.TUTORIAL_FINISHED_COOKIE_NAME]=d,g[m.STEP_PLAY_HISTORY_COOKIE_NAME]=k.stepPlayHistory,g[m.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=p,g[m.SPLIT_START_FROM_STEP_COOKIE_NAME]=c,g[m.INTERACTION_GUID_COOKIE_NAME]=S,window._testMe&&(g[m.STEP_COMPLETED_HISTORY_COOKIE_NAME]=k.stepCompletedHistory),A.raiseEvent("SavingPersistenceData",g),g),f=_walkmeInternals.ctx.get("ClientStorageManager"),h=f.keysConfig.walkthru.persistenceData;f.saveData(h.key,T,h.expiry,o)},this.getPersistenceData=function(t){var e=s(t),r=o(e,-1),n={state:i.getInt(e[m.CURRENT_STATE_COOKIE_NAME],I.WALKTHRU_STATE.NOT_RUNNING),step:i.getInt(e[m.CURRENT_STEP_COOKIE_NAME],-1),playNum:e[m.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||k.stepAppearanceIndex,tutotrialGUID:e[m.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:e[m.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:i.defaultValue(e[m.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:i.defaultValue(e[m.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:i.defaultValue(e[m.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:i.defaultValue(e[m.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:a.getWalkthruIndexByWalkthruId(r),splitTutorialIds:i.defaultValue(e[m.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:i.defaultValue(e[m.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:e[m.INTERACTION_GUID_COOKIE_NAME]};return A.raiseEvent("GettingPersistenceData",{persistenceData:e,current:n}),n},this.getRunningWalkthruId=function(t){return o(s(t))};var m=I.WALKTHRU_PERSISTANCE_DATA_FIELDS;function o(t,e){return i.getInt(t[m.CURRENT_TUTORIAL_COOKIE_NAME],e)}function s(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(I.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}},function(t,e){t.exports=function(r,l,d,p,c,S,g,T,f,h,I,E,k,_,a){function t(t){g.customerLog("Restoring cross user state",5);var e=a.getAllUserGuids();if(!e.length)return t&&t(),!1;for(var r=0;r<e.length;r++){var n=e[r];if(i(n,t))return n}return!1}function i(s,u){var t=h.getRunningWalkthruId(s);function e(){var t,e,r,n=(t=s,e=h.getPersistenceData(t),(r=l.getStepByIndex(e.tutorial,e.step))&&(e.isTutorialFinished||e.state!=E.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&e.state!=E.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||T.getSettingsValue(r.Settings,"sticky",0)||r.IsSkippable||(g.customerLog("page change happened while waiting for element - pausing walkthru",2),e.state=E.WALKTHRU_STATE.PAUSED)),e);d.stepAppearanceIndex=n.playNum,d.splitPointStack=n.splitPointStack,d.stepPlayHistory=n.stepPlayHistory,d.currentWalkthru=n.tutorial,d.currentStep=n.step,d.stepCompletedHistory=n.stepCompletedHistory,d.state=n.state,f.raiseEvent("RestoringStateFromCookie",n),p.setCurrentInteractionGuid(n.interactionGuid),n.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=n.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=n.playInitiator;var a=l.getStepByIndex(d.currentWalkthru,d.currentStep);function i(){c.playSetTimeout(function(){S.executeCurrentStep()},1e3*a.Delay)}if(d.state==E.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||d.state==E.WALKTHRU_STATE.PASSING_OWNERSHIP&&a){d.currentStep--;var o=l.getStepByIndex(d.currentWalkthru,d.currentStep);o&&(o.playNumber=d.stepAppearanceIndex),S.stepWasCompleted(!0),d.currentStep++}if(g.customerLog("isTutorialFinished: "+n.isTutorialFinished,5),1!=n.isTutorialFinished||d.state!=E.WALKTHRU_STATE.RUNNING&&d.state!=E.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&d.state!=E.WALKTHRU_STATE.PASSING_OWNERSHIP)if(g.customerLog("Continue from cookie: currentTutorial: "+d.currentWalkthru+" -- currentState: "+d.state+" -- currentStep: "+d.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+s,5),!a||d.state!=E.WALKTHRU_STATE.RUNNING&&d.state!=E.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&d.state!=E.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&d.state!=E.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&d.state!=E.WALKTHRU_STATE.WAITING_FOR_CONDITION&&d.state!=E.WALKTHRU_STATE.PASSING_OWNERSHIP)if(a&&d.state==E.WALKTHRU_STATE.WAITING_FOR_REDIRECT)S.loadTutorial(d.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(a&&d.state==E.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)S.startNewTutorial(d.currentWalkthru,d.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!a||d.state!=E.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&d.state!=E.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(d.state==E.WALKTHRU_STATE.WAITING_FOR_SPLIT)k.splitTutorialIds=n.splitTutorialIds,k.splitStartFromStepId=n.splitStartFromStepId,I.resumeSplit();else{if(d.state!=E.WALKTHRU_STATE.PAUSED)return S.resetState(),g.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+s+")",5),u&&u(!1),!1;g.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),_.releaseBalloons(),S.releaseBalloonsTimeouts(),S.resetState(),f.raiseEvent("WalkthruAborted")}else T.getSettingsValue(a.Settings,"sticky",0)?(g.customerLog("Sticky - keep looking for element",5),d.state=E.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,i()):a.IsSkippable&&(d.getCurrentWalkthru().Steps.length==d.currentStep+1?S.tutorialFinished():(d.currentStep++,d.state=E.WALKTHRU_STATE.RUNNING,i()));else i();else S.tutorialFinished(!0);return u&&u(!0),!0}t?r.afterStepsLoaded(t,e):e()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=i}},function(t,e,r){(function(W){t.exports=function(S,g,T,f,h,I,E,k,_){var r=this;r.LoadStepsForWT=function(t){return r.afterStepsLoaded(t,function(){})},r.afterStepsLoaded=function(t,e){if(A[t])return A[t].then(e,e);var r,n,a,i,o,s,u,l,d,p=_.getWalkthrus(),c=function(t){for(var e=_.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}(t);return p[c]&&0==p[c].Steps.length?(A[t]=(o=c,s=t,u=S.getPublishDirectory(),l=S.getPublishVersion(),d=u+(r=l,n=s,a="data_"+r+"_wt_"+n,i=E.getCurrentLanguage(),i&&(a+="_"+i),a+".js"),I.customerLog("Retriving steps for Walkthtu: "+s,3),new W(function(a,e){g.execute({url:d,dataType:"jsonp",cache:!0,jsonpCallback:"walkme_steps_"+s,success:function(t){var e,r,n;e=o,r=t,(n=_.getWalkthrus())[e].Steps=r,T.fixSteps(n[e],k.get()),function(t,e){for(var r=[],n=0;n<t.length;n++){var a=t[n];if(h.isBranchStep(a)){var i=a.Settings.action.arguments.wtId;r.push(m(i))}r=r.concat(C(a))}f.executeParallel({functionsToExecute:r,successCallback:e})}(t,a)},error:function(t){I.customerLog("Error: unable to receive data for Walkthtu: "+s,3),e(t)}})})).then(e,e),!0):e()};var A={};function m(e){return function(t){A[e]?t():r.afterStepsLoaded(e,t)}}function C(t){var e=[];if(t.LinkedTutorialIds)for(var r=t.LinkedTutorialIds.split(";"),n=0;n<r.length;n++)r[n]&&e.push(m(r[n]));return e}}}).call(e,r(29))},function(t,e){t.exports=function(s,o,u,l,d,p,c,S,g,T,f,h,I){function E(i){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var e,t;i=i||1e3;var r=0;if(1==h.splitTutorialIds.length){if(t=h.splitTutorialIds[0],h.splitStartFromStepId!=undefined){var n=o.getStepIndex(h.splitStartFromStepId,t);-1!=n&&(r=n),s.customerLog(I.formatString("Resuming split, walkthru id: {0}, step index: {1}",t,r))}}else t=function(t){try{s.customerLog("Multiple branch: Going through all walk-thrus.");var e=(i=t,f.map(i,function(t){return l.getWalkthruById(t).Steps[0]})),r=(n=e,a=f.map(n,function(t){var e,r,n=(e=t.TutorialId,(r=l.getWalkthruById(e))?r.Name:"");s.customerLog("Check walk-thru: "+t.TutorialId+" ("+n+")");var a=d.findElement(t);return a?s.customerLog("First step found."):s.customerLog("First step not found."),{step:t,element:a}}),a=f.filter(a,function(t){return t.element}),f.map(a,function(t){return t.step}));if(1==r.length)return r[0].TutorialId;if(!(1<r.length))return null;s.customerLog("can't decide which tutorial to play",5),s.customerLog(r.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(o){s.error(o)}var n,a,i}(h.splitTutorialIds);t?(c.deprecatedRaiseEvent("switchToWalkthru",t),e=l.getWalkthruIndexByWalkthruId(t),p.playSetTimeout(function(){var t={type:S.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:g.getCurrentStep().Id,appType:S.EVENT_SENDER_EVENT_APPS.Step};u.loadTutorial(e,r,!1,undefined,t)},i),T.storeStateInCookie()):(s.customerLog("Try again in 1000ms."),p.playSetTimeout(function(){E()},1e3))}catch(a){s.error(a)}})}this.makeSplit=function(t,e,r,n,a){var i;g.state=S.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=r&&(i=e,g.getCurrentWalkthru().Steps.length<=g.currentStep+1||g.splitPointStack.push({tutorialIndex:g.currentWalkthru,stepIndex:i!=undefined?i:g.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:g.stepPlayHistory,stepCompletedHistory:g.stepCompletedHistory,stepPlayStack:g.stepPlayStack})),h.splitTutorialIds=t,h.splitStartFromStepId=n,T.storeStateInCookie(),u.stepWasCompleted(),E(a)},this.resumeSplit=E}},function(t,e){t.exports=function(s,d,u,l,p,c,S,t){var g=this;g.getWalkthrus=function(t){try{for(var e=s.getWalkthrus(),r=new Array,n=0;n<e.length;n++){var a=e[n].CustomField1;a&&(a=(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"));var i={Index:n,Name:e[n].Name,Id:e[n].TutorialId,Visible:e[n].IsVisible,CustomField1:a,Description:e[n].Description,Keywords:e[n].Keywords};t&&(i.ConditionsPassed=_walkMe.canShowTutorial(e[n]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(e[n]),e[n].Keywords==undefined?i.Keywords=[]:i.Keywords=e[n].Keywords),r.push(i)}return r}catch(o){T("walkMeAPI - error running getWalkthrus.",3)}},g.getWalkthrusLabels=function(t){try{var e=(u=c.getSettingsValue(d.get().Settings,"labels",null))&&1==u.useLabels?S.get():null;if(null==e)return null;for(var r=this.getWalkthrus(t),n=function(t,e){for(var r=[],n=0;n<t.length;n++)for(var a=t[n].LinkedTutorials,i=0;i<a.length;i++)r.push(a[i]);for(var o=[],n=0;n<e.length;n++)I(e[n].Id,r)||o.push(e[n]);return o}(e,r),a=d.get(),i=[],o=0;o<e.length;o++){var s={Name:e[o].Name,Id:e[o].Id,Walkthrus:h(r,e[o].LinkedTutorials,e[o].Id)};i.push(s)}return{unlabeledWalkthrus:n,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(l){T("walkMeAPI - error running getWalkthrusLabels.",3)}var u},g.startWalkthruById=function(t,e){try{"object"!=typeof t&&(t={id:t,fromStep:e});var r=t.id,n=t.fromStep,a=t.playInitiator;if(r<0||"number"!=typeof r)return!1;var i=f(r);return!(i<0)&&(a||(a={type:u.STEP_PLAY_INITIATOR_ENUM.API}),g.startWalkthruByIndex({index:i,fromStep:n,playInitiator:a}))}catch(o){T("walkMeAPI - error running startWalkthruById.",3)}},g.startWalkthruByIndex=function(t,e){try{if(!l.isWalkMeVisible())return!1;"object"!=typeof t&&(t={index:t,fromStep:e});var r=t.index,n=t.fromStep,a=t.playInitiator;return!(r<0||"number"!=typeof r)&&(a||(a={type:u.STEP_PLAY_INITIATOR_ENUM.API}),i=a,p.raiseEvent(u.EVENTS.ApiWasCalled,{initiator:i}),_walkMe.startNewTutorial(r,n,!1,a))}catch(o){T("walkMeAPI - error running startWalkthruByIndex.",3)}var i},g.canStartWalkthru=function(t,e){try{if(!l.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var r=f(t);return!(r<0)&&_walkMe.startNewTutorial(r,e,!0,u.STEP_PLAY_INITIATOR_ENUM.API)}catch(n){T("walkMeAPI - error running canStartWalkthru.",3)}},g.setWalkthruVisibility=function(t,e){try{var r=s.getWalkthrus(),n=f(t);return!(n<0||(r[n].IsVisible=e,0))}catch(a){T("walkMeAPI - error running setWalkthruVisibility.",3)}},g.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(t){T("walkMeAPI - error running stopWalkthru.",3)}};var T=t.wrapCustomerLog("walkmeAPI");function f(t){for(var e=s.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}function h(t,e,r){for(var n=[],a=0;a<t.length;a++)if(I(t[a].Id,e)){var i=mtjQuery.extend(!0,{},t[a]);i.labelId=r,n.push(i)}return n}function I(t,e){for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1}}},function(t,e){t.exports=function(i,t,e,r,o){var n=this;n.setTutorials=i.setTutorials,n.isTutorialPackageHidden=i.isTutorialPackageHidden,n.canShowTutorial=i.canShowTutorial,n.stopTutorial=i.stopTutorial,n.startNewTutorial=i.startNewTutorial,n.tutorialFinished=i.tutorialFinished,n.executeTutorialNextStep=i.executeTutorialNextStep,n.postWelcomeStep=i.postWelcomeStep,n.executeCurrentStep=i.executeCurrentStep,n.getCurrentTutorial=t.getCurrentWalkthru,n.getTutorials=e.getWalkthrus,n.setTutorialsForEditor=function(t,e){try{for(var r=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),n=0;n<r.length;n++)r[n].userGuid=e;i.setTutorials(r)}catch(a){o.error(a)}},n.getState=function(){return t.state},n.forceSplit=function(){r.makeSplit.apply(null,arguments)},n.runTutorialsActionConditions={}}},function(t,e){t.exports=function(){this.splitTutorialIds=[],this.splitStartFromStepId}},function(t,e){t.exports=function(n,a,i,o,e,s,u,l,d){function p(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){!function(t){var e={ClickEvent:t};o.raiseEvent("UserStoppedWalkthru",e);var r=-1==n.currentStep;r||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(n.getCurrentWalkthru(),n.getCurrentStep(),a.STEP_STATUS.Exited),i.stopTutorial(r),o.raiseEvent("UserStoppedWalkthruAfterStop",e)}(t)})}function c(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function S(t){for(var e,r=s.getAll(),n=0;n<r.length;n++)r[n].releaseEvents(t)&&(e=!0);return e}function g(t){return!(t.Type!=a.STEP_TYPE.Popup||!t.LinkedTutorialIds||!i.isTutorialIdsExist(t.LinkedTutorialIds.split(";"))||(e.makeSplit(t.LinkedTutorialIds.split(";")),0))}this.addButtonEventsToBalloon=function(t,e){var r;r=t,mtjQuery(".walkme-action-next, .walkme-action-start",r).click(function(t){!function(){o.raiseEvent("NextButtonClicked");var t=n.getCurrentStep();o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),c(t),S()||(n.state=a.WALKTHRU_STATE.RUNNING,u.releaseBalloons(function(){g(t)||(i.stepWasCompleted(),i.executeTutorialNextStep())}))}()}),mtjQuery(".walkme-action-back",r).click(function(t){o.raiseEvent("BackButtonClicked"),c(n.getCurrentStep()),n.stepPlayStack.pop(),(l.isFeatureEnabled("backButtonAlways")||!S(n.lastBackButtonStepIndex-1))&&i.executePreviousStep()}),mtjQuery(".walkme-action-done",r).click(function(t){!function(){o.raiseEvent("DoneButtonClicked");var t=n.getCurrentStep();if(o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),c(t),!g(t)){var e=S();e||(i.stepWasCompleted(),i.tutorialFinished())}}()}),p(t),d.addButtonEventsToBalloon(t,e)},this.attachBalloonXButtonClickEvent=p}},function(t,e){t.exports=function(p,d,c,S,g,T,f,h,e,I,E){var k,_;this.showFailPopup=function(t,e,r,n){n+="<div style='float: right'>",n+=function(t,e,r,n){(n=p.fixConfiguration(n)).ButtonBorderColor=n.ButtonBorderColor||"#6c84a6";var a="rtl"==t.Direction?"right":"left";p.fixGradientColorsInConfiguration(n,"ButtonBgColor"),p.fixGradientColorsInConfiguration(n,"ButtonBgColor2");var i=n.ButtonBgColor,o=n.ButtonBgColor2,s=n.ButtonShadowWidth,u=n.BalloonButtonRadius,l=i!=o,d="CSS-RESET "+(l?"background:-moz-linear-gradient(top, "+i+", "+o+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+i+"), color-stop(100%,"+o+"));background:-webkit-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-o-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-ms-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:linear-gradient(to bottom, "+i+" 0%,"+o+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+i+'", endColorstr="'+o+'",GradientType=0 );':"background-color:"+i+";")+"border: 1px solid "+n.ButtonBorderColor+";color:"+n.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+a+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+u+"px;-webkit-border-radius:"+u+"px;border-radius:"+u+"px;";return i!=o&&I.isIE()&&(d+="border-radius: 0px;"),l&&CommonUtils.isGradientUsingFilter(d)&&(d+="background: url("+T.get()+"/player/resources/images/spacer.gif) repeat;"),d=d.replace(/CSS-RESET/g,A),"<button class='"+e+"' type='button' style='"+d+"'>"+r+"</button>"}(t,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",e),function(t,e,r,n,a,i,o){var s='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+r+" mt-custom-popup-"+r+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+a+'px">'+n+"</div>";s=(s=s.replace(/CSS-RESET/g,A)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+i);var u=h.getTopContainer();u.append(s),(k=mtjQuery("#walkme-popup-body",u)).css({position:"fixed","z-index":d.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),p.setStyleForBalloon(k,e,!1);var l=0;mtjQuery.each(mtjQuery("[width], [style*=width]",k),function(t,e){mtjQuery(e).width()>l&&(l=mtjQuery(e).width())}),k.width()<l&&k.css("width",l+"px"),g.centerElementInPage(k,!1),_=S.playSetInterval(function(){g.centerElementInPage(k,!0)},1e3),I.isQuirksMode()||E.shouldHandlePageAsFramesets()||c.displayOverlay(2147483630,!0),k.fadeIn("slow"),f.addButtonEventsToBalloon(k,{objectId:i,type:d.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),o&&o(k)}(0,e,"first-step-not-available",n+="</div>",420,r.Id,a)},this.closePopup=r;var A="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function r(t){_&&_.clear(),e.shouldKeepOverlay()||c.removeOverlay(),c.destroyDivWithIframes(k,t),k=null}function a(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){r()})}}},function(t,e){t.exports=function(s,u){this.showFailedToStartPopup=function(t,e,r){if("v3"==(n=t).BalloonSettings.BalloonVersion||"vm1"==n.BalloonSettings.BalloonVersion)return s.showFailedToStartPopup(t,e,r.Settings.bbcode_v);var n,a=t.BalloonSettings,i={balloonSettings:a,alertText:e,isOldBalloon:!0,bbCodeVersion:r.Settings.bbcode_v},o=s.createHtmlForNotAvailablePopup(i);u.showFailPopup(t,a,r,o)}}},function(t,e){t.exports=function(e){this.isActionStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action},this.isBranchStep=function(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch},this.isPopupStep=function(t){return t&&t.Type&&t.Type==e.STEP_TYPE.Popup},this.isSpotlightStep=function(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}},function(t,e){t.exports=function(l,d,p){this.activateSurvey=function(t,e,r,n,a,i,o){var s=p.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,u={tutorialId:t.Id,eventSource:e,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:d._currentPlayGUID};l.activateSurvey(n,s,a,r,u)}}},function(t,e){t.exports=function(r,n,a,i,o,s){var t=this;function u(t,e){var r=e.wt;r.Id!=undefined&&n.safeStartAudit(t,r)}t.auditSafeStartStatus=u,t.redirect=function(t,e){i.currentStep=0,i.state=r.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=e.tutorialIndex,o.storeStateInCookie(),a.redirect(t)},t.auditStayButtonClicked=function(t){u(r.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function(t){var e={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:n._currentPlayGUID,playInitiator:n._currentPlayInitiator,status:r.SAFESTART_ACTION.ErrorShown};s.send(e)},t.auditSafeStartFirstStatus=function(t,e){u(t,e),function(t){for(var e=0;e<t.checkStepExistsTrace.length;e++)n.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[e].stepIndex],t.checkStepExistsTrace[e].stepStatus,!1)}(e)}}},function(t,e){t.exports=function(a,i,o){this.migrateSiteConfigData=function(t){for(var e=a.getWalkthrus(),r={},n=0;n<e.length;n++)o.fixSteps(e[n],t),r[e[n].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",r)}}},function(t,e){t.exports=function(a,i,o,t,s,u){var e=this;e.register=function(){t.registerDataAppender(e)},e.append=function(t,e){var r,n;s.isNewLanguage()&&a.setWalkthrus([]),r=e[o.Tutorial],n=(n=a.getWalkthrus()).concat(r),a.setWalkthrus(n),s.isNewLanguage()&&u.setDeployables(a.getWalkthrus()),i.migrateSiteConfigData(t.SiteConfig)}}},function(t,e){t.exports=function(g,T,f,h,I,t){var e=this;e.register=function(){t.registerConverter(e)},e.convert=function(t,e){for(var r=f.get(0).getAll(),n={},a=0;a<r.length;a++)for(var i=r[a].Steps,o=0;o<i.length;o++){var s=i[o];if(T.isActionStep(s)){var u=h.getSettingsValue(s.Settings,"action",null);if(u&&"setWalkMeData"==u.actionType){var l=u.arguments,d=l.dataKey;if(t[d]){var p=l.dataDuration;if(p>=g.ONE_DAY_SECONDS)if(n[d])p>n[d].Expiry&&(n[d].Expiry=p);else{var c=t[d];if(c!==undefined){var S={Value:c,Expiry:p};n[d]=S}}}}}}for(var d in n)n.hasOwnProperty(d)&&I.saveData(d,n[d].Value,parseInt(n[d].Expiry),e)}}},function(t,e){t.exports=function(r,n,a,t,e){function i(t,e){e.isDuringLanguageChange?r.stopTutorial(undefined,!0,!0):(e.isDestroyingAll&&(r.setMember("tutorialRunSettingsMap",{}),r.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),n.releaseAllEventBindings(),r.cleanCurrentStepResources())}this.init=function(){t.on(e.EVENTS.CallReleaseElementsFromBalloons,i)}}},function(t,e){t.exports=function(n,t){var a,e=this;function r(t,e,r){n.isPopupStep(e)&&(a=document.activeElement,r.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,e){n.isPopupStep(e)&&a&&(a.focus(),a=null)}e.register=function(){t.register(e)},e.bindEvents=function(){_walkmeInternals.bind("NewStepShown",r),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}},function(t,e){t.exports=function(n){this.append=function(t){var e=n.getCurrentWalkthru();if(e){t.WalkthruId=e.TutorialId;var r=n.getCurrentStep();r&&(t.StepIndex=r.StepIndex)}}}},function(t,e){t.exports=function(t,r){this.init=function(){wmjQuery.each(t.get(),function(t,e){e.addAppender(r)})}}},function(t,e){t.exports=function(o,s,u,l){this.handle=function(t,e){if(s.isInPlayMode()){var r=t.Steps[e],n={step:r,tutorial:t};o.raiseEvent("WalkthruFailedToStart",n)}else{var a=l.getSiteConfigByTutorialId(t.Id),i=u.getSettingsValue(t.Settings,"cantPlayAlert",a.TutorialCantPlayText);_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(a,i,t)}}}},function(t,e){t.exports=function(a,e,r,o,i,s,n,u,l,d,p,c,S,g,T,f,h,I,E,k,_){this.register=function(){a.addActions(t)};var t={playWt:function(n,a,i){function t(){try{var t=n.playWtFromBeginning?0:u.getStepIndex(n.StepId,n.wtId);if(-1==t){var e=k.formatString("Step with id: {0} was not found in walkthru with id {1}",n.StepId,n.wtId);f.customerLog(e)}else WalkMeAPI.startWalkthruById({id:parseInt(n.wtId),fromStep:t,playInitiator:{type:a,objectId:i.Id}})}catch(r){var e=k.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",n.wtId,n.StepId,_.toJSON(r));f.customerLog(e)}}this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){E.afterStepsLoaded(n.wtId,t)}},redirect:function(r){this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){c.stepWasCompleted();var t=r.redirectUrl,e=n.redirect(t);e||(c.stepWasCompleted(),c.executeTutorialNextStep())}},refresh:function(){this.isValid=function(){return!0},this.doAction=function(){c.stepWasCompleted(),p.storeStateInCookie(),T.libSetTimeout(function(){location.reload(!0)},200)},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function(r,t,n){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=r.wtId,!!l.getWalkthruById(t);var t},this.doAction=function(){var t,e=r.wtId;1==r.returnToWt?(t=u.getStepIndex(r.StepId,n.TutorialId),S.makeSplit([e],t,!1,r.startingStepId)):S.makeSplit([e],t,!0,r.startingStepId)},this.getGoToData=function(){var t=l.getWalkthruIndexByWalkthruId(r.wtId);return{tutorialIndex:t,stepIndex:0}}},stopWt:function(t){this.type="stopWt",this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){c.stepWasCompleted(),e.stopTutorial()}},playStep:function(n,t,a){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=n.StepId,e=a.TutorialId,-1!=u.getStepIndex(t,e);var t,e},this.doAction=function(){var t=n.StepId,e=u.getStepIndex(t,a.TutorialId);c.stepWasCompleted(),d.currentStep<e&&c.fillMissingStepAudits(d.currentWalkthru,d.currentStep+1,e,o.STEP_STATUS.SkippedByActionStep),d.currentStep=e,c.executeCurrentStep()},this.getGoToData=function(){var t=n.StepId,e=u.getStepIndex(t,a.TutorialId),r=l.getWalkthruIndexByWalkthruId(a.TutorialId);return{tutorialIndex:r,stepIndex:e}}},openPlayerMenu:function(e,r,n){this.isValid=function(){return window.WalkMePlayerAPI!=undefined},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{c.stepWasCompleted(),a.get("openMenu",e,r,n).doAction()}catch(t){f.error(t,"Failed opening player menu")}c.executeTutorialNextStep()}},waitForCond:function(a){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){d.state=o.WALKTHRU_STATE.WAITING_FOR_CONDITION,p.storeStateInCookie();var e=d.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:A,elementName:"Wait for condition step: "+e.StepTitle},r=h.createOld(t),n=a.condition;r.onValueChanged(function(t){g.isDebuggerOnWindow()&&s.deprecatedRaiseEvent(o.EVENTS.ActionConditionEvaluated,e),t&&(c.stepWasCompleted(),c.executeTutorialNextStep())}),r.evaluateAsync(n),c.addCurrentStepResource(r)}},delay:function(t){this.isValid=function(){return!0},this.doAction=function(){return p.storeStateInCookie(),T.playSetTimeout(function(){c.stepWasCompleted(),c.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function(t,e,r){this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action;var n={stepId:r.Id,tutorialId:r.TutorialId};this.doAction=function(){var t=i.keysConfig.passOwnership.newWindowTime;if(i.saveData(t.key,(new Date).getTime(),t.expiry),!I.get().enabled())return f.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void c.tutorialFinished();I.get().determineOwnership(n)}},setWalkMeData:function(e){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(e.dataDuration,o.COOKIE_LIFE_2_YEARS);r.saveData(e.dataKey,e.dataValue,t),c.stepWasCompleted(),c.executeTutorialNextStep()},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action}},A="superstep"}},function(t,e){t.exports=function(r,n,a){var i;this.redirect=function(t,e){return!!r.canRedirect(t,e)&&(a.storeStateInCookie(),i=n.libSetTimeout(function(){r.redirect(t)},200),!r.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function(t,e){return r.canRedirect(t,e)&&!r.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function(){i&&i.clear()}}},function(t,e){t.exports=function(E,i,t,k,_,r,A,m,C,W,v,y,o,P,s,a,u,N,x,l,R){var w=this;w.getDelay=function(t){var e=r.get();return e.Settings.keyPressedNextStepDelay?e.Settings.keyPressedNextStepDelay:n};var n=2e3,d=[];function L(t,n,e,r,a){var i=undefined;a&&(i=function(t){var e,r=n.Settings.complexHtml;return(e="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex]).value==r.val||e.text==r.txt});var o={change:i};r.push(O(t,0,["change"],e,1e3,o))}function O(t,e,n,a,i,r){y.state=C.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=U(function(t,e){k.customerLog("Step event triggered.");var r=-1!==wmjQuery.inArray("click",n);return D(a,i,r,t,e),!0}),s=0;s<n.length;s++){function u(e){return function(t){e&&!e(t)||o(t)}}var l=u(r&&r[n[s]]);M(t,n[s]+".mt",l)}return function(t){return o(null,t)}}function U(n){var a=!1;return function(t,e){var r;return a||(r=n(t,e),a=!0),r}}function M(t,e,r){a.bind(t,e,r),d.push({element:t,eventName:e})}function D(t,e,r,n,a){s.releaseBalloons(),r&&(i.shouldHandlePageAsFramesets()&&i.checkIfAnyFrameIsUnloaded(e),null!=n&&l.setIgnoreNextBeforeUnload(function(t){if(u.isIE()){var e=!1;if("a"==t[0].nodeName.toLowerCase())e=t;else{var r=t.parents("a");0<r.length&&(e=mtjQuery(r[0]))}if(e&&e.attr("href")&&0==e.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(n.target)))),y.state=C.WALKTHRU_STATE.RUNNING,o.storeStateInCookie(),v.stepWasCompleted(a==undefined),a!=undefined&&(y.currentStep=a),t&&a==undefined?v.tutorialFinished():E.playSetTimeout(function(){v.executeTutorialNextStep()},e)}w.handle=function(t,e,r,n,a){var i=y.getStep(r),o=!1,s=!!i.LinkedTutorialIds,u=[];if(s){var l=i.LinkedTutorialIds.split(";");v.isTutorialIdsExist(l)?(k.customerLog("This is a branched step. Branched walk-thru's: "+i.LinkedTutorialIds),u.push(function(e,r,n,t){y.state=C.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,v.releaseEvents(e,r);for(var a=U(function(t){k.customerLog("Clicked the branched walk-thru."),v.releaseEvents(e,r),P.makeSplit(n)}),i=U(function(){v.releaseEvents(e,r)}),o=0;o<r.length;o++)M(e,r[o]+".mt",a);return function(){return i()}}(t,["click","mousedown"],l))):(k.customerLog("Branch walk-thru id, not found: "+i.LinkedTutorialIds),s=!1)}var d,p=!1,c=!1,S=v.getNextStepIncludingSplit(),g=null==S;if(v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(y.state=C.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,g?c=!0:(S.IsSkippable||x.getSettingsValue(S.Settings,"skipNotExists",!1)||v.getPlayConditionMode(S)!=C.playConditionModes.STICKY_CONDITION&&!v.checkPlayStepCondition(S)||x.getSettingsValue(S.Settings,"fake",!1))&&-2==v.checkIfStepExistsWithSkippables(S.TutorialIndex,S.StepIndex,undefined,undefined,undefined,C.CHECK_STEP_MODE.Normal)?c=!0:p=!0),v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.NOTHING))g||(o=!0);else if(v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.HOVER))d=["mouseenter"],u.push(O(t,0,d,g,500));else if(v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.CLICK)&&!s)d=W.get(),u.push(O(t,0,d,g,1e3));else if(v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var T=w.getDelay(e);d=["keydown","paste","change"];var f={};_.isFeatureEnabled("wmAccessibility")&&(f.keydown=function(t){return 9!=t.which&&16!=t.which}),u.push(O(t,0,d,g,T,f))}else v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(y.state=C.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,v.setMember("dontContinueTutorial",!0)):v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.DURATION)?i.durationHandler=E.playSetTimeout(function(){v.stepWasCompleted(),v.executeTutorialNextStep()},1e3*i.Duration):v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?L(t,e,g,u,!1):v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?L(t,e,g,u,!0):v.isStepTrigger(i.End,C.WALKTHRU_STEP_TRIGGER.SWIPE)&&(d=["swipe"],u.push(O(t,0,d,g,500)));if(i.Settings.additionalTriggers){m.deprecatedRaiseEvent(C.EVENTS.Walkthrus.StepAdditionalTriggerSet,i);var h={elementName:e.StepTitle||e.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0},I=N.createOld(h);I.onValueChanged(function(t){if(m.deprecatedRaiseEvent(C.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,i),t){v.setMember("dontContinueTutorial",!1),i.durationHandler&&(i.durationHandler.clear(),i.durationHandler=null);var e=A.containsFuncName(i.Settings.additionalTriggers,["ElementClicked"]);D(g,1e3,e)}}),I.evaluateAsync(i.Settings.additionalTriggers),v.addCurrentStepResource(I)}return{executeNextStep:o,clearElementEventsFuncs:u,buttons:{nextButton:p,doneButton:c,backButtonStepIndex:R.handleStepIndex(i,a,n)}}},w.releaseAllEventBindings=function(){for(var t=0;t<d.length;t++)try{var e=d[t].element,r=d[t].eventName;a.unbind(e,r)}catch(n){}d.length=0},function(){}.apply(null,arguments)}},function(t,e){t.exports=function(i,o,s,u){this.handleStepIndex=function(t,e,r){var n;if(0<t.StepIndex&&i.isStepTrigger(t.End,o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!function(t){if(null!=t){var e=s.getStep(t);return u.isActionStep(e)}return!1}(e)){if(0<=(n=i.checkIfStepExistsWithSkippables(r,t.StepIndex-1,0,-1,undefined,o.CHECK_STEP_MODE.Normal))){var a=s.getStep(n);i.isStepTrigger(a.End,o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(n=-1)}s.lastBackButtonStepIndex=n}return n}}},function(t,e){t.exports=function(t,n,a,e,r){this.findFirstStep=function(t,e,r){return e=e||0,a.checkIfStepExistsWithSkippables(t,e,undefined,undefined,r,n.CHECK_STEP_MODE.Normal)},function(){}.apply(null,arguments)}},function(t,e){t.exports=function(n,a,i,t,e){function r(t,e){var r=n.mapBbcodeInitiator(e);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:r})})}this.register=function(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru,activator:r})}}},function(t,e){t.exports=function(a,t,i){var e=this;e.activate=function(t){var e=i.SURVEY_START_EVENTS.BbCodeClicked,r=a.getCurrentWalkthru(),n=r.Settings.survey&&r.Settings.survey.surveyId;_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(r,e,t,n,"always")},e.canActivate=function(t){return-1==t&&a.getCurrentWalkthru()},e.register=function(){t.addActivator(e)}}},function(t,e){t.exports=function(e,t){this.isEnabled=function(t){return e.isPopupStep(t)},this.findElement=function(){return t.get()}}},function(t,e){t.exports=function(e){this.isEnabled=function(t){return e.isActionStep(t)},this.findElement=function(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}},function(t,e,r){(function(w){t.exports=function(t,e,r,n,a,i,o,s,u,l,d,p,c,S,g,T,f,h,I,E,k,_,A,m,C,W,v,y){var P,N;function x(){R(N)}function R(t){wmjQuery.each(t,function(t,e){e.register()})}this.init=function(){R(P),W.one(m.EVENTS.DATA_FILES_LOADED,x)},this.postDataFileLoaded=x,P=[r],(N=[n,e,i,u,S,g,k,_,w.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(m.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),N.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),N.push({register:function(){s.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),N.push({register:function(){l.init()}}),N.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),N.push({register:function(){d.addDeployable(p.Tutorial,c,p.BusinessSolution)}}),N.push({register:function(){E.register(h),E.register(I)}}),N.push({register:function(){f.addRestorer(T,!0)}}),N.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),N.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),N.push({register:function(){A.addOwnershipManager(m.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,C,!0)}}),N.push({register:function(){v.addAutoStartHelper(y,p.Tutorial)}})}}).call(e,r(2))},function(t,e){t.exports=function(i,o,s,a,u,l,d,p,c,S,t,e,r,g,T,f){var h,n=this;function I(t){var e=T.getCurrent()==o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,r=e?T.getCurrentStepData():function(){var t=f.getData(o.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,undefined,c.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:p.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),n=a.evaluateOwnership(r.step,r.walkthruId,e);return e||t||function(t){switch(t){case o.PASS_OWNERSHIP.EvaluateOwnership.Owner:s.stepWasCompleted(),s.executeTutorialNextStep();break;case o.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:l.state!=o.WALKTHRU_STATE.PASSING_OWNERSHIP&&l.currentStep++,l.state=o.WALKTHRU_STATE.PASSING_OWNERSHIP,d.storeStateInCookie()}}(n),n}n.walkthruStarted=function(n,a){return T.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,(t=n,e=a,{walkthruId:(r=u.getWalkthruByIndex(t)).Id,step:r.Steps[e]}),function(){return t=n,e=a,(r=i.get().optimizedDetermineOwnership())||(l.state=o.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,l.currentWalkthru=t,l.currentStep=e,d.storeStateInCookie(),s.terminateTutorial(),l.state=o.WALKTHRU_STATE.NOT_RUNNING,i.get().reset()),r;var t,e,r});var t,e,r},n.evaluateOwnership=function(t,e){return e?T.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e,function(){return I(t)}):I(t)},n.evaluateOwnershipByPeeking=function(){return(r.isFeatureEnabled("po_peek")||r.isFeatureEnabled("passOwnership"))&&a.isPassOwnershipStep(e.peekNextCookieStep())},n.gainedOwnership=function(t,e,r){var n;h("walkthru is gaining ownership with state "+l.state,3),r&&(n=e,t?(_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),g.resumeTimeoutsArray("playTimeouts")):(h("ownership granted to: "+n,3),S.restoreStateFromCookie(c.getUserGuid())))},n.lostOwnership=function(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},h=t.wrapCustomerLog(o.PASS_OWNERSHIP.LOG_FEATURE)}},function(t,e){t.exports=function(s,u,l,d){this.peekNextCookieStep=function(t){try{t=t||0;var e=s.getData(u.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},d.getAllUserGuids()[0]),r=e[u.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],n=l.getWalkthruById(r),a=e[u.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME],i=n.Steps[a+t];return i}catch(o){return null}}}},function(t,e){t.exports=function(n){function a(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==n.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=a,this.evaluateOwnership=function(t,e,r){return r&&!a(t)?n.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function(t,e){if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(e),!1;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(r){return!0}}(t,e)?n.PASS_OWNERSHIP.EvaluateOwnership.Owner:n.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}},function(t,e){t.exports=function(c,S,g,T,f){var h,I;this.clearCache=function(){h=undefined,I=undefined},this.checkShouldAutoStart=function(t,e,r){return t!=c.Tutorial||(i=e,o=r,s=S.getWalkthruIndexByWalkthruId(i.Id),u=g.checkTutorialSkipFirstStepCondition(s),l=g.checkTutorialRedirectCondition(s,!1),d=i.IsWelcomeStep,h||(h=T.get()),!((p=h).state==f.WALKTHRU_STATE.RUNNING&&p.step==u)&&(n=p,a=o,I!=undefined?I:I=n.state==f.WALKTHRU_STATE.PAUSED||n.state==f.WALKTHRU_STATE.NOT_RUNNING||!a&&g.checkIfStepExistsWithSkippables(n.tutorial,n.step,undefined,undefined,undefined,f.CHECK_STEP_MODE.Sandbox,"- Engagement")<0)&&(l&&d||g.checkIfStepExistsWithSkippables(s,u,undefined,undefined,undefined,f.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=u&&!l));var n,a,i,o,s,u,l,d,p}}},function(t,e){t.exports=function(e,r,n){this.get=function(){var t=e.getPersistenceData();return n.state==r.WALKTHRU_STATE.PAUSED&&(t.state=n.state),t}}},function(t,e){t.exports=function(e,r,n){this.isRunning=function(){var t=e.get();return t.state==n.WALKTHRU_STATE.PAUSED||t.state==n.WALKTHRU_STATE.NOT_RUNNING||r.checkIfStepExistsWithSkippables(t.tutorial,t.step,undefined,undefined,undefined,n.CHECK_STEP_MODE.Sandbox,"- Engagement")<0?wmjQuery.Deferred().reject():wmjQuery.when()}}},function(t,e){t.exports=function(r,n){this.fixAnchorTagsOnBeforeUnload=function(){if(r.isIE()){var t=mtjQuery("a[href^='javascript:']"),e="click.walkme.ignoreUnload";t.off(e),t.on(e,function(){n.setIgnoreNextBeforeUnload(!0)})}}}},function(t,e){t.exports=function(a,i,t){function e(t){t=parseInt(t);for(var e=a.stepPlayHistory,r=0;r<e.length;r++){var n=i.getStepById(e[r]);if(n&&n.StepIndex==t)return!0}return!1}this.register=function(){t.addSupportedFunction("isStepPlayed",e)}}},function(t,e){t.exports=function(s,r,u,l,o,i,d){this.register=function(){wmjQuery.each(t,function(t,e){r.register(t,e.handler,e.params)})};var t={};function n(t,e){for(var r=parseInt(e.funcArgs.StepId),n=i.stepPlayHistory,a=0;a<n.length;a++)if(n[a]==r)return void t.setValue(!0);t.setValue(!1)}function e(t,e){I(n,t,e)}function a(t,e){for(var r=parseInt(e.funcArgs.StepId,10),n=0;n<i.stepCompletedHistory.length;n++)if(i.stepCompletedHistory[n]==r)return void t.setValue(!0);t.setValue(!1)}function p(t,e){I(a,t,e)}function c(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruById(n),i=l.getStepIndex(r,n);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!1))}else t.setValue(!1)}function S(t,e){I(c,t,e)}function g(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruIndexByWalkthruId(n),i=l.getStepIndex(r,n);-1<i&&-1<a&&0<=o.checkIfStepExistsWithSkippables(a,i,undefined,undefined,undefined,d.CHECK_STEP_MODE.Sandbox)?t.setValue(!0):t.setValue(!1)}function T(t,e){I(g,t,e)}function f(t,e){var r=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruById(n),i=l.getStepIndex(r,n);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!0))}else t.setValue(!1)}function h(t,e){I(f,t,e)}function I(t,e,r){t(e,r),e.setValue(!e.getValue())}t.StepPlayed={handler:n},t.StepNotPlayed={handler:e},t.StepCompleted={handler:a},t.StepNotCompleted={handler:p},t.StepExists={handler:c,params:{editorPreview:!0}},t.StepNotExists={handler:S,params:{editorPreview:!0}},t.StepCanPlay={handler:g},t.StepCannotPlay={handler:T},t.StepIsVisible={handler:f,params:{editorPreview:!0}},t.StepIsNotVisible={handler:h,params:{editorPreview:!0}}}},function(t,e){t.exports=function(o,s,u,l){this.auditWalkthruStart=function(t,e,r,n,a){if(l.isEnabled()){var i=t.Steps;s.postEvent(s.EVENT_TYPES.Play,{type:s.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:u.map(e),oRequestedSubObject:i[r].Id,oActualSubObject:i[n].Id})}},function(){}.apply(null,arguments)}},function(t,e){t.exports=function(t,e,g,r,T,f,h,i,I,E,k,_,n,A,a,o){var m,C,W=this;function s(){C=t.register("sa",{beforeSendingManipulationFunc:u,actionUrl:"/Statistics/AddStepsLogs",prefixForStorage:"sa",sendingThreshold:5,dataType:"step audit",dataIdFieldName:"Id",requestParamsFunc:function(t){return{stepActionsSerialized:o.toJSON(t),source:e.getEnvironmentId(),customFieldsSerialized:o.toJSON(e.getAnalyticsCustomFields()),browser:r.browser.string,os:r.os.name,domain:window.location.host,permutationId:e.getPermutationId(),endUserGuid:e.getEndUserGuid()}}})}function u(t,e){!function(t,e){var r=[];if(!(t.length<=0))for(var n=0;n<t.length;n++)t[n].stepIndex==e.stepIndex&&t[n].playGuid==e.playGuid&&(r.push(t.splice(n,1)[0]),n--)}(t,e)}function l(t){W._currentPlayGUID!=undefined&&0!=W._currentPlayGUID.length||(W._currentPlayGUID=n.generateNewPlayGuid(t))}function v(t,e,r,n,a,i){l(t);var o={};return o.tutorialID=t,o.stepId=e,o.stepIndex=r,o.totalSteps=a,o.playGuid=W._currentPlayGUID,o.TicksSince1970=(new Date).getTime(),o.StepStatus=n,function(t){if(!W._currentPlayInitiator||W._currentPlayInitiator.type==T.STEP_PLAY_INITIATOR_ENUM.NONE)return t.playInitiator=T.STEP_PLAY_INITIATOR_ENUM.NONE;t.playInitiator=W._currentPlayInitiator.type,W._currentPlayInitiator.objectId!=undefined&&-1<W._currentPlayInitiator.objectId&&(t.initObjId=W._currentPlayInitiator.objectId)}(o),f.defaultValue(i,!1)&&(o.isFirstStepError=!0),o}W.safeStartAudit=function(t,e){if(!A.isEnabled())return m("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var r={tutorialId:e.TutorialId,tutorialName:e.Name,playGuid:W._currentPlayGUID,playInitiator:W._currentPlayInitiator,status:t};i.send(r)}catch(a){g.error(a)}try{var n=v(e.Id,-1,-1,T.STEP_STATUS.SupposedToShow,e.Steps.length,!1);n.SafeStartAction=t,C.sendData(n)}catch(a){g.error(a)}},W.auditStep=function(t,e,r,n){!function(t,e){if(t!=T.STEP_STATUS.SkippedByActionStep){var r=t==T.STEP_STATUS.SkippedStartedFromBiggerStep?T.EVENTS.Walkthrus.NewSkippedStep:T.EVENTS.Walkthrus.CheckNewStep;_.deprecatedRaiseEvent(r,e)}}(r,e);var a,i,o,s,u,l,d,p=t.Steps.length;if(!A.isEnabled())return m("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(e.TutorialId<0)m(f.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",e.Id,e.TutorialId),3);else try{var c=v(e.TutorialId,e.Id,e.StepIndex+1,r,p,n);C.sendData(c);try{return a=e,i=t,o=p,s=r,u=E.getSettingsValue(a.Settings,"action",""),h.postEvent(h.EVENT_TYPES.Play,{type:h.EVENT_APPS.Step,oId:a.Id,oName:a.StepTitle||"",aType:(d=u,d?I.map(d.actionType):""),aAppType:(l=u,l?k.map(l.actionType):""),oType:a.Type,indx:a.StepIndex+1,owId:i.TutorialId,owName:i.Name,owType:h.EVENT_APPS.Walkthru,total:o,status:s,pId:W._currentPlayGUID})}catch(S){return g.error(S,"Failed auditStep: stepId="+e.Id+", wtId="+t.TutorialId+", status="+r+", pId="+W._currentPlayGUID),!0}}catch(S){return g.error(S),S}},W.removeAllStepAuditsLogs=function(){C.clearAndStopSavingData()},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=l,function(){m=g.wrapCustomerLog(T.LOG_FEATURES.AUDIT_STEPS),a.on(T.EVENTS.BeforeStorageLoadedCallback,s)}.apply(null,arguments)}},function(t,e){t.exports=function(t,e,r,n){this.register=function(){t.add(r.ENTITY_TYPE.step,e.EVENT_SENDER_EVENT_APPS.Step,function(){return n._currentPlayGUID})}}}]));
